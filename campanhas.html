<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Doe.App - Campanhas</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body onload="carregarCampanha()">

    <!-- Cabeçalho -->
    <header>
        <div class="logo">
            <img src="Imagens/Logo-Doe.App.png" alt="Logo Doe.App">
        </div>
            <button class="home-button" onclick="voltarHome()">Home</button>
    </header>

    <section class="institutions">
        <h1>Detalhes da Campanha</h1>
        <div id="listaInstituicoes"></div>
    </section>

    <section class="campaign-detail">
        <img id="campanhaImagem" alt="Imagem da Campanha">
        <h2 id="campanhaNome"></h2>
        <p id="campanhaDescricao"></p>
    </section>

    <button onclick="doarAgora()">Doe Agora</button>

    <script>
        // Função para carregar os detalhes da campanha a partir do localStorage
        function carregarCampanha() {
            const nome = localStorage.getItem('campanhaNome');
            const imagem = localStorage.getItem('campanhaImagem');
            const descricao = localStorage.getItem('campanhaDescricao');
            const instituicoes = JSON.parse(localStorage.getItem('campanhaInstituicoes')) || [];

            document.getElementById('campanhaNome').textContent = nome;
            document.getElementById('campanhaImagem').src = imagem;
            document.getElementById('campanhaDescricao').textContent = descricao;

            const instituicoesContainer = document.getElementById('listaInstituicoes');
            instituicoesContainer.innerHTML = '';
            instituicoes.forEach(instituicao => {
                const div = document.createElement('div');
                div.classList.add('institution-card');
                div.innerHTML = `<h3>${instituicao.nome}</h3><p>${instituicao.descricao}</p>`;
                instituicoesContainer.appendChild(div);
            });
        }

        // Função para verificar login e redirecionar para doação
        function doarAgora() {
            const usuarioLogado = localStorage.getItem('usuarioLogado');
            if (!usuarioLogado) {
                window.location.href = 'login.html';
            } else {
                window.location.href = 'doacao.html';
            }
        }

        // Função para voltar à página inicial
        function voltarHome() {
            window.location.href = 'index.html';
        }

        // Função para selecionar campanha e armazenar dados no localStorage
        function selecionarCampanha(nome, imagem, descricao, instituicoes) {
            localStorage.setItem('campanhaNome', nome);
            localStorage.setItem('campanhaImagem', imagem);
            localStorage.setItem('campanhaDescricao', descricao);
            localStorage.setItem('campanhaInstituicoes', JSON.stringify(instituicoes));

            window.location.href = 'campanhas.html';
        }
    </script>
</body>
</html>
